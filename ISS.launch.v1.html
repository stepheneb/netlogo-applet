<html><head><title>ISS.launch.v1</title><style type="text/css"><!--  :link { color: rgb(110, 0, 110); }   :visited { color: rgb(110, 0, 110); }   body { margin-left: 5px; font-family: arial, sans-serif;          background: white; font-size: 12pt }   h2 { background: rgb(166,172,255);        font-size: 15pt;        padding-left: 6px; padding-right: 6px; padding-top: 6px;        padding-bottom: 6px; }   p { margin-left: 10px; }   pre { margin-left: 13px; background: rgb(225,225,225);         font-family: monospace; padding-left: 3px; padding-right: 3px;         padding-top: 3px; padding-bottom: 3px; } --></style></head><body><p>This page was automatically generated by NetLogo 4.1beta3.Questions, problems?  Contact <a href="mailto:feedback@ccl.northwestern.edu">feedback@ccl.northwestern.edu</a>.</p><p>The applet requires Java 5 or higher.Java must be enabled in your browser settings.Mac users must have Mac OS X 10.4 or higher.Windows and Linux users may obtain the latest Java from<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p><p><hr><p><font size="-1">In order for this to work, this file, your model file(ISS.launch.v1.nlogo), and the file NetLogoLite.jarmust all be in the same directory.  (You can copy NetLogoLite.jarfrom the directory where you installed NetLogo.)</font></p><p><font size="-1">On some systems, you can test the applet locally on your computerbefore uploading it to a web server.  It doesn't work on all systems,though, so if it doesn't work from your hard drive, please tryuploading it to a web server.</font></p><p><font size="-1">You don't need to include everything in this file in your page.If you want, you can just take the HTML code beginning with&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTMLfile you want.  It's even OK to put multiple &lt;applet&gt; tagson a single page.</font></p><p><font size="-1">If NetLogoLite.jar and your model are in differentdirectories, you must modify the archive= and value= linesin the HTML code to point to their actual locations.(For example, if you have multiple applets in differentdirectories on the same web server, you may want to put a single copy of NetLogoLite.jar in one central place andchange the archive= lines of all the HTML files to pointto that one central copy.  This will save disk space foryou and download time for your users.)</font></p><p><applet code="org.nlogo.lite.Applet"        archive="NetLogoLite.jar"        width="903" height="478">  <param name="DefaultModel"         value="ISS.launch.v1.nlogo"></applet></p><p>powered by<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p><p>view/download model file:<a href="ISS.launch.v1.nlogo">ISS.launch.v1.nlogo</a></p><h2>WHAT IS IT?</h2><p>This section could give a general understanding of what the model is trying to show or explain.</p><br><h2>HOW IT WORKS</h2><p>This section could explain what rules the agents use to create the overall behavior of the model.</p><br><h2>HOW TO USE IT</h2><p>This section could explain how to use the model, including a description of each of the items in the interface tab.</p><br><h2>THINGS TO NOTICE</h2><p>This section could give some ideas of things for the user to notice while running the model.</p><br><h2>THINGS TO TRY</h2><p>This section could give some ideas of things for the user to try to do (move sliders, switches, etc.) with the model.</p><br><h2>EXTENDING THE MODEL</h2><p>This section could give some ideas of things to add or change in the procedures tab to make the model more complicated, detailed, accurate, etc.</p><br><h2>NETLOGO FEATURES</h2><p>This section could point out any especially interesting or unusual features of NetLogo that the model makes use of, particularly in the Procedures tab.  It might also point out places where workarounds were needed because of missing features.</p><br><h2>RELATED MODELS</h2><p>This section could give the names of models in the NetLogo Models Library or elsewhere which are of related interest.</p><br><h2>CREDITS AND REFERENCES</h2><p>This section could contain a reference to the model's URL on the web if it has one, as well as any other necessary credits or references.</p><br><h2>PROCEDURES</h2><pre><font color="#000000"></font><font color="#660096">breed</font><font color="#000000"> [mountains mountain]</font><font color="#660096">breed</font><font color="#000000"> [earths earth]</font><font color="#660096">breed</font><font color="#000000"> [arrows arrow]</font><font color="#660096">breed</font><font color="#000000"> [ISSs ISS]       </font><font color="#5a5a5a">;;ISS=International Space Station</font><font color="#000000"></font><font color="#660096">breed</font><font color="#000000"> [puffs puff]</font><font color="#660096">breed</font><font color="#000000"> [junkpiles junkpile]</font><font color="#660096">breed</font><font color="#000000"> [moons moon]</font><font color="#007f69">puffs-own</font><font color="#000000"> [x0 y0 countdown] </font><font color="#5a5a5a">;; (x0,y0) are the coordinates of the puff relative to the earth's center.  </font><font color="#000000"></font><font color="#007f69">junkpiles-own</font><font color="#000000"> [x1 y1 ] </font><font color="#5a5a5a">;;(x1,y1) are the coordinates of the junkpile relative to the earth's center.  </font><font color="#000000"></font><font color="#007f69">Globals</font><font color="#000000"> [scale eRadK gHP mOffP ixP iyP iSizeP cycleCount rX rY rVX rVY rMass b1 b2 b3 b4 mX mY alive? Gm Gmm running? oldLS oldMH oldIScale launchHeight time nextPuffTime puffInterval fuelUsed ]</font><font color="#5a5a5a">;; scale is the overall scale used in the main view in patches per km--that is scale is the number of patches on the screen to km in the simulation</font><font color="#000000"></font><font color="#5a5a5a">;; eRadK is the earth's radius in km</font><font color="#000000"></font><font color="#5a5a5a">;; gHP is the ground height in patches, the hight of the mounain base above the bottom of the screen measured in patches</font><font color="#000000"></font><font color="#5a5a5a">;; mOffP is the offset from the left edge of the main sceen of the base of the mountain (and the launch site) in patches</font><font color="#000000"></font><font color="#5a5a5a">;; ixP is the x-coordinate of center of the insert (and the center of the earth shown there) in patches</font><font color="#000000"></font><font color="#5a5a5a">;; iyP is the y-coordinate ...</font><font color="#000000"></font><font color="#5a5a5a">;; iSizeP is the size (length) of the insert square in patches</font><font color="#000000"></font><font color="#5a5a5a">;; cycleCount is the number of times the computation has gone though the main loop since start</font><font color="#000000"></font><font color="#5a5a5a">;; rX is the x-coordinate of current location of the SSI (used to be a rocket) in km where the center of the Earth is (0,0)</font><font color="#000000"></font><font color="#5a5a5a">;; ry is the y-coordinate ....</font><font color="#000000"></font><font color="#5a5a5a">;; rVX is the current x-component of the velocity of the SSI in km/s</font><font color="#000000"></font><font color="#5a5a5a">;; rVY is the y-component</font><font color="#000000"></font><font color="#5a5a5a">;; rMass is the mass of the SSI</font><font color="#000000"></font><font color="#5a5a5a">;; b1-b4 are the offsets of the x and y coordinate origins for the main and insert scenes. Hence scale * x + b1 is the screen location in patches of x measured in km</font><font color="#000000"></font><font color="#5a5a5a">;; mx is the x-coord of the moon</font><font color="#000000"></font><font color="#5a5a5a">;; my is the y-coord of the moon</font><font color="#000000"></font><font color="#5a5a5a">;; alive? is a logical that is true between launch and crash</font><font color="#000000"></font><font color="#5a5a5a">;; Gm is the universal gravitational constant G times the mass of the earth</font><font color="#000000"></font><font color="#5a5a5a">;; Gmm is the universal gravitational constant G times the mass of the moon</font><font color="#000000"></font><font color="#5a5a5a">;; running? is a logical that is true between launch and crash if the simulation is not paused. </font><font color="#000000"></font><font color="#5a5a5a">;; oldLS stores the old value of the LS the log of the scale. Used to make the scale slider always active</font><font color="#000000"></font><font color="#5a5a5a">;; oldMH ditto for the mountain height slider</font><font color="#000000"></font><font color="#5a5a5a">;; oldIScale ditto for the insert scale slider</font><font color="#000000"></font><font color="#5a5a5a">;; launchHeight stores the height of the launch</font><font color="#000000"></font><font color="#5a5a5a">;; time is the elapsed time since launch in sec</font><font color="#000000"></font><font color="#5a5a5a">;; nextPuffTime stores the time when the next puff will be emitted</font><font color="#000000"></font><font color="#5a5a5a">;; puffInterval is the time between puffs in sec</font><font color="#000000"></font><font color="#5a5a5a">;; fuelUsed is the amount of fuel used in firing the rocket in N-sec</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> Run_Simulation                      </font><font color="#5a5a5a">;; executed repeatedly when the 'Run Simulation' button is pressed</font><font color="#000000">  </font><font color="#0000aa">if</font><font color="#000000"> cycleCount </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">                    </font><font color="#5a5a5a">;; cycleCount is a global variable that is zero when NetLogo is first started</font><font color="#000000">     [initialize ]                     </font><font color="#5a5a5a">;; only on the first time through, initialize all the globals and create turtles. </font><font color="#000000">  </font><font color="#0000aa">if</font><font color="#000000"> running?                          </font><font color="#5a5a5a">;; 'running?&quot; is a logical that is true after firing the ISS until paused or crashed</font><font color="#000000">     [stepISS                          </font><font color="#5a5a5a">;; if running? is true then move the ISS    </font><font color="#000000">     </font><font color="#0000aa">set</font><font color="#000000"> cyclecount cyclecount </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]   </font><font color="#5a5a5a">;; cycleCount counts the number of steps executed              </font><font color="#000000">  </font><font color="#0000aa">every</font><font color="#000000"> </font><font color="#963700">.2</font><font color="#000000">      [updateUI                         </font><font color="#5a5a5a">;; monitor the user interface every .2 second</font><font color="#000000">     placeMoon                         </font><font color="#5a5a5a">;; move the moon</font><font color="#000000">     </font><font color="#0000aa">ask</font><font color="#000000"> earths [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">.0027778</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> time  ]        </font><font color="#5a5a5a">;; rotate the earth  </font><font color="#000000">     ]       </font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> updateUI                           </font><font color="#5a5a5a">;; this adjusts scene for changes in arrows, scales, and mountain height</font><font color="#000000">  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> (oldLS </font><font color="#660096">=</font><font color="#000000"> MainScale)           </font><font color="#5a5a5a">;; check for a change in the MainScale slider</font><font color="#000000">     [drawScene </font><font color="#0000aa">set</font><font color="#000000"> oldLS MainScale ]  </font><font color="#5a5a5a">;; redraw the entire scene if the scale is changed. Remember the current setting  </font><font color="#000000">  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> (oldiScale </font><font color="#660096">=</font><font color="#000000"> iScale)     [</font><font color="#0000aa">set</font><font color="#000000"> oldiscale iScale      </font><font color="#0000aa">ask</font><font color="#000000"> earths [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> iscale </font><font color="#660096">*</font><font color="#000000"> eRadK ]  </font><font color="#5a5a5a">;; adjust the earth's size</font><font color="#000000">      placeISSs ]                     </font><font color="#5a5a5a">;; redraw the ISS</font><font color="#000000">   </font><font color="#0000aa">ask</font><font color="#000000"> mountains [       </font><font color="#0000aa">let</font><font color="#000000"> earthTopP </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> gHP   </font><font color="#5a5a5a">;; the top of the earth in the main scene in patchs </font><font color="#000000">       </font><font color="#0000aa">let</font><font color="#000000"> mountainSizeP </font><font color="#963700">8.8</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#5a5a5a">;; measured in patchs</font><font color="#000000">       </font><font color="#0000aa">let</font><font color="#000000"> mountainX </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> mOffP </font><font color="#5a5a5a">;; locates the x-center of the mountain</font><font color="#000000">       </font><font color="#0000aa">setxy</font><font color="#000000"> mountainX earthTopP </font><font color="#660096">+</font><font color="#000000"> ( mountainSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#5a5a5a">;; center the mountain just below half its diameter above the eart</font><font color="#000000">       </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> mountainSizeP]  placeArrows                       </font><font color="#5a5a5a">;; in the future, this might also respond to other changes in the UI</font><font color="#000000">  handlePuffs</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> reset                            </font><font color="#5a5a5a">;; this is handy for debugging, but shouldn't be necessary in the production version</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> Cyclecount </font><font color="#963700">0</font><font color="#000000">  </font><font color="#0000aa">cp</font><font color="#000000"> </font><font color="#0000aa">ct</font><font color="#000000">                           </font><font color="#5a5a5a">;; clear patches and turtles</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> initialize  </font><font color="#0000aa">set</font><font color="#000000"> CycleCount </font><font color="#963700">1</font><font color="#000000">               </font><font color="#5a5a5a">;; this ensures that initialize is execued only once</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> running? </font><font color="#963700">false</font><font color="#000000">             </font><font color="#5a5a5a">;; start in the non running mode</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> alive? </font><font color="#963700">false</font><font color="#000000">               </font><font color="#5a5a5a">;; start with the ISS not alive </font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> eRadK </font><font color="#963700">6378</font><font color="#000000">                 </font><font color="#5a5a5a">;; earth radius in km</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> iSizeP </font><font color="#963700">80</font><font color="#000000">                  </font><font color="#5a5a5a">;; the size of the square insert in patchs</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> ixP </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> iSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#5a5a5a">;; the x-coordinate of the center of the insert, in patchs </font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> iyP </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> iSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#5a5a5a">;; the y-coordinate of the center of the insert, in patchs (puts it in the upper left corner)</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rVX </font><font color="#963700">0</font><font color="#000000">                      </font><font color="#5a5a5a">;; the initial ISS x-velocity (km/s)</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rVY </font><font color="#963700">0</font><font color="#000000">                      </font><font color="#5a5a5a">;; the initial ISS y-velocity</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rX </font><font color="#963700">0</font><font color="#000000">                       </font><font color="#5a5a5a">;; the initial ISS x-position relative to the earth center (km)</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rY eRadK </font><font color="#660096">+</font><font color="#000000"> LaunchHeight    </font><font color="#5a5a5a">;; the initial ISS y-position in km</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rMass </font><font color="#963700">3.44e5</font><font color="#000000">                  </font><font color="#5a5a5a">;; the ISS mass in kg</font><font color="#000000">  </font><font color="#5a5a5a">;; note there are additional globals created in the UI</font><font color="#000000">  </font><font color="#5a5a5a">;; iscale                      ;; the number of patchs per km in the inset scene</font><font color="#000000">  </font><font color="#5a5a5a">;; mountianHeight              ;; the height of the mountain in km</font><font color="#000000">  </font><font color="#5a5a5a">;; launchHeight                ;; the height of the launching arrow in km</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> Gm </font><font color="#963700">398600</font><font color="#000000">                  </font><font color="#5a5a5a">;; the universal gravitational constant times the mass of the earth in km-kg-sec system</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> Gmm </font><font color="#963700">4900</font><font color="#000000">                   </font><font color="#5a5a5a">;; the universal gravitational constant times the mass of the moon in the same units</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> puffInterval </font><font color="#963700">600</font><font color="#000000">           </font><font color="#5a5a5a">;; determines how many seconds between puffs</font><font color="#000000">  create-ISSs </font><font color="#963700">2</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;ISS&quot;</font><font color="#000000"> ]  </font><font color="#5a5a5a">;; the ISS will show up in the main scene and the insert</font><font color="#000000">  create-arrows </font><font color="#963700">2</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;arrow&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> ]  create-earths </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;earth&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]  create-mountains </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;mountain&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]  create-moons </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]  drawScene</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> placeArrows </font><font color="#5a5a5a">;; keep the arrows up-to-date with changes in the sliders</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> launchHeight </font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">^</font><font color="#000000"> launch_altitude  </font><font color="#5a5a5a">;; reads logarithmic slider</font><font color="#000000">  </font><font color="#0000aa">ask</font><font color="#000000"> arrow </font><font color="#963700">2</font><font color="#000000"> [    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">90</font><font color="#000000">  </font><font color="#5a5a5a">;; aim it in the right direction</font><font color="#000000">    </font><font color="#0000aa">let</font><font color="#000000"> xx </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> mOffP    </font><font color="#0000aa">let</font><font color="#000000"> yy </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> gHP </font><font color="#660096">+</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> launchHeight    </font><font color="#0000aa">ifelse</font><font color="#000000"> yy </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> [</font><font color="#0000aa">setxy</font><font color="#000000"> xx yy </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000"> ] [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]]  </font><font color="#0000aa">ask</font><font color="#000000"> arrow </font><font color="#963700">3</font><font color="#000000"> [    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">90</font><font color="#000000">     </font><font color="#0000aa">let</font><font color="#000000"> temp insert </font><font color="#963700">0</font><font color="#000000"> (launchHeight </font><font color="#660096">+</font><font color="#000000"> eRadK)    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp     </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp       [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> ]      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]    ]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> launch  </font><font color="#5a5a5a">; move the ISS to the launcher and give it an initial velocity</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rVX launchSpeed   </font><font color="#0000aa">set</font><font color="#000000"> rVY </font><font color="#963700">0</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rX </font><font color="#963700">0</font><font color="#000000">                       </font><font color="#5a5a5a">;; the initial location of the ISS is at the origin of the x-axis, directly above the center of the earth</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> rY eRadK </font><font color="#660096">+</font><font color="#000000"> LaunchHeight    </font><font color="#5a5a5a">;; the y-coordinate is the radius of the earth plus the launch height in km.</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> alive? </font><font color="#963700">true</font><font color="#000000">                </font><font color="#5a5a5a">;; turn on the ISS. </font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> running? </font><font color="#963700">true</font><font color="#000000">     </font><font color="#0000aa">set</font><font color="#000000"> time </font><font color="#963700">0</font><font color="#000000">                     </font><font color="#5a5a5a">;; times the launch</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> nextPuffTime </font><font color="#963700">0</font><font color="#000000">  handlePuffs           </font><font color="#5a5a5a">;; create a puff</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> fuelUsed </font><font color="#963700">0</font><font color="#000000">                </font><font color="#5a5a5a">;; reset measure of fuel used</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> puffInterval </font><font color="#963700">.04</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> (scale </font><font color="#660096">*</font><font color="#000000"> launchSpeed) </font><font color="#5a5a5a">;; sets 50 puffs across screen given launch speed</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> stepISS  </font><font color="#5a5a5a">;; move the ISS forward one dt step. All calcuations done in KMKS system. </font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> dt </font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">^</font><font color="#000000"> Model_Speed       </font><font color="#5a5a5a">;; Model Speed is set by a slider</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> xx rx </font><font color="#660096">+</font><font color="#000000"> rvx </font><font color="#660096">*</font><font color="#000000"> dt </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">      </font><font color="#5a5a5a">;; move forward a half-step to (xx,yy) (local variables)</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> yy ry </font><font color="#660096">+</font><font color="#000000"> rvy </font><font color="#660096">*</font><font color="#000000"> dt </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> r2 xx </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> yy </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">        </font><font color="#5a5a5a">;; compute the square of the distance to the center of the earth</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> r </font><font color="#660096">sqrt</font><font color="#000000"> r2                 </font><font color="#5a5a5a">;; compute the distance to the center of the earth at this half-step location</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> rm2 (xx </font><font color="#660096">-</font><font color="#000000"> mx ) </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> (yy </font><font color="#660096">-</font><font color="#000000"> my ) </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#5a5a5a">;; the square of the distance to the moon</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> rm </font><font color="#660096">sqrt</font><font color="#000000"> rm2               </font><font color="#5a5a5a">;; the distance to the moon</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> time time </font><font color="#660096">+</font><font color="#000000"> dt  </font><font color="#0000aa">ifelse</font><font color="#000000">  r </font><font color="#660096">&gt;</font><font color="#000000"> eRadK     [ </font><font color="#0000aa">let</font><font color="#000000"> ax </font><font color="#963700">0</font><font color="#000000">      </font><font color="#0000aa">let</font><font color="#000000"> ay </font><font color="#963700">0</font><font color="#000000">      </font><font color="#0000aa">if</font><font color="#000000"> gravity       [ </font><font color="#0000aa">let</font><font color="#000000"> r3 r </font><font color="#660096">*</font><font color="#000000"> r2             </font><font color="#5a5a5a">;; compute r-cubed</font><font color="#000000">        </font><font color="#0000aa">let</font><font color="#000000"> rm3 rm </font><font color="#660096">*</font><font color="#000000"> rm2        </font><font color="#0000aa">set</font><font color="#000000"> ax </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> ( Gm </font><font color="#660096">*</font><font color="#000000"> xx </font><font color="#660096">/</font><font color="#000000"> r3 </font><font color="#660096">+</font><font color="#000000"> Gmm </font><font color="#660096">*</font><font color="#000000"> ( xx </font><font color="#660096">-</font><font color="#000000"> mx ) </font><font color="#660096">/</font><font color="#000000"> rm3 )  </font><font color="#5a5a5a">;; use the force at the mid-point to determine the acceleration</font><font color="#000000">        </font><font color="#0000aa">set</font><font color="#000000"> ay </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> ( Gm </font><font color="#660096">*</font><font color="#000000"> yy </font><font color="#660096">/</font><font color="#000000"> r3 </font><font color="#660096">+</font><font color="#000000"> Gmm </font><font color="#660096">*</font><font color="#000000"> ( yy </font><font color="#660096">-</font><font color="#000000"> my ) </font><font color="#660096">/</font><font color="#000000"> rm3 ) ]  </font><font color="#5a5a5a">;; a-vector = -G*me*r-vector / r-magnitude^3</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> rvx rvx </font><font color="#660096">+</font><font color="#000000"> ax </font><font color="#660096">*</font><font color="#000000"> dt     </font><font color="#5a5a5a">;; use the acceleration to change the velocity</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> rvy rvy </font><font color="#660096">+</font><font color="#000000"> ay </font><font color="#660096">*</font><font color="#000000"> dt      </font><font color="#0000aa">set</font><font color="#000000"> rx rx </font><font color="#660096">+</font><font color="#000000"> rvx </font><font color="#660096">*</font><font color="#000000"> dt      </font><font color="#5a5a5a">;; use the velocity to change the position</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> ry ry </font><font color="#660096">+</font><font color="#000000"> rvy </font><font color="#660096">*</font><font color="#000000"> dt      placeISSs              </font><font color="#5a5a5a">;; show the ISSs if they are visible</font><font color="#000000">      handlePuffs]              </font><font color="#5a5a5a">;; make and remove puffs </font><font color="#000000">   [</font><font color="#0000aa">set</font><font color="#000000"> alive? </font><font color="#963700">false</font><font color="#000000">     showresults    </font><font color="#5a5a5a">;; type results into output box</font><font color="#000000">     explode ]                   </font><font color="#5a5a5a">;; if the ISS collides with the earth, explode</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> showresults  </font><font color="#0000aa">let</font><font color="#000000"> r eRadK </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">pi</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> rx ry) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">  </font><font color="#5a5a5a">;; distance on surface of earth from launch</font><font color="#000000">  </font><font color="#0000aa">output-type</font><font color="#000000"> LaunchSpeed  </font><font color="#0000aa">output-type</font><font color="#000000"> </font><font color="#963700">&quot;km/s &quot;</font><font color="#000000">  </font><font color="#0000aa">output-type</font><font color="#000000"> </font><font color="#660096">round</font><font color="#000000"> (</font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">^</font><font color="#000000"> launch_Altitude)  </font><font color="#0000aa">output-type</font><font color="#000000"> </font><font color="#963700">&quot;km  &quot;</font><font color="#000000">  </font><font color="#0000aa">ifelse</font><font color="#000000"> alive?    [</font><font color="#0000aa">output-print</font><font color="#000000"> </font><font color="#963700">&quot;Still going&quot;</font><font color="#000000">]    [</font><font color="#0000aa">output-print</font><font color="#000000"> </font><font color="#963700">&quot;Crashed&quot;</font><font color="#000000">]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> handlePuffs  </font><font color="#0000aa">if</font><font color="#000000"> time </font><font color="#660096">&gt;</font><font color="#000000"> nextPuffTime [           </font><font color="#5a5a5a">;; if it is time for a new puff...</font><font color="#000000">    create-puffs </font><font color="#963700">1</font><font color="#000000"> [                 </font><font color="#5a5a5a">;; create a new puff</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> nextPuffTime nextPuffTime </font><font color="#660096">+</font><font color="#000000"> puffInterval  </font><font color="#5a5a5a">;; set the time for the next puff</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> x0 rx                      </font><font color="#5a5a5a">;; the location of this puff is taken from the current ISS location</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> y0 ry      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> countdown </font><font color="#963700">400</font><font color="#000000">              </font><font color="#5a5a5a">;; allow 400 puffs maximum</font><font color="#000000">      </font><font color="#0000aa">let</font><font color="#000000"> temp main x0 y0            </font><font color="#5a5a5a">;; Place the latest puff only. Compute the screen position of each puff</font><font color="#000000">      </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp              </font><font color="#5a5a5a">;; last item in temp is a logical that tells whether this puff is in the main screen. </font><font color="#000000">         [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp     </font><font color="#5a5a5a">;; if it is on-screen update the location of the puff</font><font color="#000000">           </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]         [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">] ]     </font><font color="#0000aa">ask</font><font color="#000000"> puffs [                      </font><font color="#5a5a5a">;; when one puff is created decrement all the countdown variable in all</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> countdown countdown </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">      </font><font color="#0000aa">if</font><font color="#000000"> countdown </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]]        </font><font color="#5a5a5a">;; kill off any with non-positive countdown.</font><font color="#000000">  ]</font><font color="#007f69">end</font><font color="#000000">  </font><font color="#007f69">to</font><font color="#000000"> placePuffs  </font><font color="#0000aa">ask</font><font color="#000000"> puffs [                        </font><font color="#5a5a5a">;; this applies to all puffs          </font><font color="#000000">       </font><font color="#0000aa">let</font><font color="#000000"> temp main x0 y0           </font><font color="#5a5a5a">;; compute the screen position of each puff</font><font color="#000000">       </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp              </font><font color="#5a5a5a">;; last item in temp is a logical that tells whether this puff is in the main screen. </font><font color="#000000">         [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp     </font><font color="#5a5a5a">;; if it is on-screen update the location of the puff</font><font color="#000000">           </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]         [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]]                </font><font color="#5a5a5a">;; if outside the main scene make it vanish but don't kill it</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> placeISSs   </font><font color="#5a5a5a">;; show the ISSs at their location rx,ry if visible</font><font color="#000000">   </font><font color="#0000aa">if</font><font color="#000000"> alive? [      </font><font color="#0000aa">ask</font><font color="#000000"> ISSs [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">atan</font><font color="#000000"> rvx rvy           </font><font color="#0000aa">let</font><font color="#000000"> s </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale       </font><font color="#5a5a5a">;; scale the ISS</font><font color="#000000">        </font><font color="#0000aa">if</font><font color="#000000"> s </font><font color="#660096">&lt;</font><font color="#000000">  </font><font color="#963700">5</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> s </font><font color="#963700">5</font><font color="#000000"> ]    </font><font color="#5a5a5a">;; but don't let it get smaller than 4     </font><font color="#000000">        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> s  ]            </font><font color="#5a5a5a">;; set the size of the turtle</font><font color="#000000">             </font><font color="#5a5a5a">;; if it is visible in the main scene, show it</font><font color="#000000">      </font><font color="#0000aa">ask</font><font color="#000000"> ISS </font><font color="#963700">0</font><font color="#000000"> [                     </font><font color="#5a5a5a">;; this is the ISS in the main scene</font><font color="#000000">      </font><font color="#0000aa">let</font><font color="#000000"> temp main rx ry             </font><font color="#5a5a5a">;; temp contains the screen coordinates of rx,ry (items 0 and 1) and whether this is visible (item 2)</font><font color="#000000">      </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp                </font><font color="#5a5a5a">;; if the ISS is visible in the main screen.........</font><font color="#000000">         [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp           </font><font color="#5a5a5a">;; update the location of the ISS</font><font color="#000000">           </font><font color="#0000aa">st</font><font color="#000000">  ]             </font><font color="#5a5a5a">;; show turtle</font><font color="#000000">          [</font><font color="#0000aa">ht</font><font color="#000000">] ]            </font><font color="#5a5a5a">;; hide if it is outside the main scene</font><font color="#000000">      </font><font color="#0000aa">ask</font><font color="#000000"> ISS </font><font color="#963700">1</font><font color="#000000"> [   </font><font color="#5a5a5a">;; if it is visible in the insert, show it. </font><font color="#000000">       </font><font color="#0000aa">let</font><font color="#000000"> temp insert rx ry         </font><font color="#5a5a5a">;; insert returns three values. The last is a logical that tells whether the ISS object is visible. </font><font color="#000000">       </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp              </font><font color="#5a5a5a">;; if it is visible in the insert.......</font><font color="#000000">         [ </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp     </font><font color="#5a5a5a">;; update the location of the ISS in the insert</font><font color="#000000">            </font><font color="#0000aa">st</font><font color="#000000"> ]               </font><font color="#5a5a5a">;; show it in case it has been off</font><font color="#000000">         [</font><font color="#0000aa">ht</font><font color="#000000"> ]]                </font><font color="#5a5a5a">;; otherwise hide it</font><font color="#000000">   ]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> placeJunk       </font><font color="#5a5a5a">;; show the junkpiles that are visible</font><font color="#000000">  </font><font color="#0000aa">ask</font><font color="#000000"> junkpiles [    </font><font color="#0000aa">let</font><font color="#000000"> temp main x1 y1          </font><font color="#5a5a5a">;; convert the earth coordinates to screen coordinates. </font><font color="#000000">    </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp             </font><font color="#5a5a5a">;; if this point is visible on the main screen...</font><font color="#000000">      [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000"> ]  </font><font color="#5a5a5a">;;place it and turn it on</font><font color="#000000">      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]               </font><font color="#5a5a5a">;; otherwise turn it off</font><font color="#000000">  ]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> placeMoon  </font><font color="#0000aa">let</font><font color="#000000"> theta </font><font color="#963700">60</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1.49e-4</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> time  </font><font color="#5a5a5a">;; the angle of the moon from vertical</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> mX </font><font color="#963700">384400</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> theta      </font><font color="#5a5a5a">;; </font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> my </font><font color="#963700">384400</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> theta   </font><font color="#0000aa">ask</font><font color="#000000"> moons     [ </font><font color="#0000aa">let</font><font color="#000000"> temp main mX mY          </font><font color="#5a5a5a">;; get screen coordinates of moon</font><font color="#000000">      </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> temp             </font><font color="#5a5a5a">;; check whether visible</font><font color="#000000">        [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> temp </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> temp  </font><font color="#5a5a5a">;; move the moon to location </font><font color="#000000">          </font><font color="#0000aa">let</font><font color="#000000"> s </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">1737</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale   </font><font color="#5a5a5a">;; 1737 is the moon radius in km</font><font color="#000000">          </font><font color="#0000aa">ifelse</font><font color="#000000"> s </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">             </font><font color="#5a5a5a">;; don't let the moon shrink below 2</font><font color="#000000">            [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> s ]            [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]         </font><font color="#5a5a5a">;; 1737 is the moon radius</font><font color="#000000">          </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label-color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">          </font><font color="#5a5a5a">;; set label &quot;moon&quot;</font><font color="#000000">          ]         [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">           </font><font color="#5a5a5a">;;set label &quot;&quot;</font><font color="#000000">        ]]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to-report</font><font color="#000000"> main [u v]             </font><font color="#5a5a5a">;; checks whether the location u,v in earth coordinates is visible in the main scene.</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> x scale </font><font color="#660096">*</font><font color="#000000"> u </font><font color="#660096">+</font><font color="#000000"> b1          </font><font color="#5a5a5a">;; transform u,v to screen coordinates</font><font color="#000000">                                 </font><font color="#5a5a5a">;; returns the screen coordinates and a logical telling whether it is currently visible.</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> y scale </font><font color="#660096">*</font><font color="#000000"> v </font><font color="#660096">+</font><font color="#000000"> b2          </font><font color="#5a5a5a">;; (x,y) are the patch locations of the ISS relative to the center of the scene</font><font color="#000000">                                 </font><font color="#5a5a5a">;; first check to see whether it the point is inside the main scene</font><font color="#000000">    </font><font color="#0000aa">ifelse</font><font color="#000000">  x </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> x </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> y </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> y </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000">        [ </font><font color="#0000aa">let</font><font color="#000000"> r iSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">         </font><font color="#5a5a5a">;; the 'radius' of the insert</font><font color="#000000">       </font><font color="#0000aa">let</font><font color="#000000"> leftEdge  ixP </font><font color="#660096">-</font><font color="#000000"> r        </font><font color="#0000aa">let</font><font color="#000000"> rightEdge ixP </font><font color="#660096">+</font><font color="#000000"> r        </font><font color="#0000aa">let</font><font color="#000000"> topEdge iyP </font><font color="#660096">+</font><font color="#000000"> r         </font><font color="#0000aa">let</font><font color="#000000"> botEdge iyP </font><font color="#660096">-</font><font color="#000000"> r                                   </font><font color="#5a5a5a">;; now check that it is outside the insert</font><font color="#000000">       </font><font color="#0000aa">ifelse</font><font color="#000000">  x </font><font color="#660096">&gt;</font><font color="#000000"> rightEdge </font><font color="#660096">or</font><font color="#000000"> x </font><font color="#660096">&lt;</font><font color="#000000"> leftEdge </font><font color="#660096">or</font><font color="#000000"> y </font><font color="#660096">&gt;</font><font color="#000000"> topEdge </font><font color="#660096">or</font><font color="#000000"> y </font><font color="#660096">&lt;</font><font color="#000000"> botEdge          [</font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> x y </font><font color="#963700">true</font><font color="#000000">)]         [</font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> x y </font><font color="#963700">false</font><font color="#000000">)]]           </font><font color="#5a5a5a">;; return false if it is not outside the insert</font><font color="#000000">     [</font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> x y </font><font color="#963700">false</font><font color="#000000">)]                </font><font color="#5a5a5a">;; return false if it is outside the main screen</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to-report</font><font color="#000000"> insert [u v]              </font><font color="#5a5a5a">;; check whether the point u,v in earth coord is visible in the insert</font><font color="#000000">                                    </font><font color="#5a5a5a">;; returns the screen coordinates and a logical telling whether it is currently visible.</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> x iscale </font><font color="#660096">*</font><font color="#000000"> u </font><font color="#660096">+</font><font color="#000000"> b3            </font><font color="#5a5a5a">;; convert u,v into screen coordinates</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> y iscale </font><font color="#660096">*</font><font color="#000000"> v </font><font color="#660096">+</font><font color="#000000"> b4                                    </font><font color="#5a5a5a">;; check that it is inside the insert</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> InR (iSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">         </font><font color="#5a5a5a">;; the inside 'radius' of the insert</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> leftEdge  ixP </font><font color="#660096">-</font><font color="#000000"> InR    </font><font color="#0000aa">let</font><font color="#000000"> rightEdge ixP </font><font color="#660096">+</font><font color="#000000"> InR    </font><font color="#0000aa">let</font><font color="#000000"> topEdge iyP </font><font color="#660096">+</font><font color="#000000"> InR     </font><font color="#0000aa">let</font><font color="#000000"> botEdge iyP </font><font color="#660096">-</font><font color="#000000"> InR    </font><font color="#0000aa">ifelse</font><font color="#000000"> x </font><font color="#660096">&lt;</font><font color="#000000"> rightEdge </font><font color="#660096">and</font><font color="#000000"> x </font><font color="#660096">&gt;</font><font color="#000000"> leftEdge </font><font color="#660096">and</font><font color="#000000"> y </font><font color="#660096">&lt;</font><font color="#000000"> topEdge </font><font color="#660096">and</font><font color="#000000"> y </font><font color="#660096">&gt;</font><font color="#000000"> botEdge       [</font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> x y </font><font color="#963700">true</font><font color="#000000">)]      [</font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> x y </font><font color="#963700">false</font><font color="#000000">)]</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> explode    </font><font color="#0000aa">let</font><font color="#000000"> sz </font><font color="#963700">10</font><font color="#000000">    </font><font color="#0000aa">ask</font><font color="#000000"> ISSs [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;explosion&quot;</font><font color="#000000">]  </font><font color="#5a5a5a">;; turn ISSs into explosions</font><font color="#000000">    </font><font color="#0000aa">repeat</font><font color="#000000"> </font><font color="#963700">30</font><font color="#000000"> [                          </font><font color="#5a5a5a">;; slowly increase the size of each for 50 steps of .1 sec each</font><font color="#000000">       </font><font color="#0000aa">ask</font><font color="#000000"> ISS </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> sz ]]       </font><font color="#0000aa">ask</font><font color="#000000"> ISS </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> sz </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]]       </font><font color="#0000aa">set</font><font color="#000000"> sz sz </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">       </font><font color="#0000aa">wait</font><font color="#000000"> </font><font color="#963700">.1</font><font color="#000000"> ]         </font><font color="#0000aa">ask</font><font color="#000000"> ISSs [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;ISS&quot;</font><font color="#000000">]  </font><font color="#5a5a5a">;; turn them back into ISSs</font><font color="#000000">   create-junkpiles </font><font color="#963700">1</font><font color="#000000">                      </font><font color="#5a5a5a">;; create a junkpile where the ISS crashes</font><font color="#000000">     [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;junk&quot;</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">atan</font><font color="#000000"> rx ry                </font><font color="#5a5a5a">;; its heading is away from the center of the earth</font><font color="#000000">     </font><font color="#0000aa">set</font><font color="#000000"> x1 rx                             </font><font color="#5a5a5a">;; give it the currnet coordinates of the ISS. </font><font color="#000000">     </font><font color="#0000aa">set</font><font color="#000000"> y1 ry]   placeJunk  </font><font color="#5a5a5a">;; shows all the junkpiles, including the last</font><font color="#000000">   </font><font color="#0000aa">set</font><font color="#000000"> running? </font><font color="#963700">false</font><font color="#000000">                    </font><font color="#5a5a5a">;; after colliding with the earth, pause the integration engine</font><font color="#000000">   </font><font color="#0000aa">set</font><font color="#000000"> alive? </font><font color="#963700">false</font><font color="#000000">                      </font><font color="#5a5a5a">;; after colliding with the earth, the ISS is not alive</font><font color="#000000">   </font><font color="#5a5a5a">;; the difference between running? and alive? is that a ISS may be alive but paused, not running</font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> drawScene  </font><font color="#5a5a5a">;; Draws everything--updates the screen</font><font color="#000000">  </font><font color="#5a5a5a">;; first some parameters for the main drawing</font><font color="#000000">  </font><font color="#5a5a5a">;; scale is a global, the number of patchs per km in the main scene -- the main scaling number</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> scale  </font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">^</font><font color="#000000"> MainScale       </font><font color="#5a5a5a">;; scale is the number of patchs per km in the main scene--the slider is logarithmic</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> v </font><font color="#963700">1</font><font color="#000000">    </font><font color="#0000aa">if</font><font color="#000000"> MainScale </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-3</font><font color="#000000">     [</font><font color="#0000aa">set</font><font color="#000000"> v (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> MainScale ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000"> ] </font><font color="#5a5a5a">;; goes from 0 to 1 as the MainScale goes from 1 to -3. Stop moving earth when MainScale gets below -3 </font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> gHP </font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> v     </font><font color="#5a5a5a">;; height of the ground above bottom of the main scene, in patchs. Moves up for smaller scales</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> mOffP </font><font color="#963700">90</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> v      </font><font color="#5a5a5a">;; mountain offset from left of scene, in patchs. Moves to center for smaller scales</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> b1 mOffP </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000">       </font><font color="#5a5a5a">;; the constant in the conversion of x to patchs in the main scene</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> b2 gHP </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> eRadK </font><font color="#5a5a5a">;; the constant in the conversion of y to patchs in the main scene</font><font color="#000000">  </font><font color="#5a5a5a">;; the conversion is (h,v) in patchs in the main scene = (scale*x + b1, scale*y + b2) where x,y are in km relative to the earth center</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> b3 ixP                    </font><font color="#5a5a5a">;; the constant in the conversion of x to patchs in the insert scene</font><font color="#000000">  </font><font color="#0000aa">set</font><font color="#000000"> b4 iyP                     </font><font color="#5a5a5a">;; the constant in the conversion of y to patchs in the insert scene</font><font color="#000000">  </font><font color="#5a5a5a">;; the conversion is (h,v) in patchs in the insert scene = (iscale*x + b3, iscale*y + b4) where x,y are in km relative to the earth center</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> TropoTop </font><font color="#963700">10</font><font color="#000000"> </font><font color="#5a5a5a">;; the top of the tropospehere in km above the earth's surface</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> StratoTop </font><font color="#963700">50</font><font color="#000000"> </font><font color="#5a5a5a">;; the top of the stratosphere in km above the earth's surface</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> earthTopP </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> gHP </font><font color="#5a5a5a">;; the top of the earth in the main scene in patchs </font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> mountainSizeP </font><font color="#963700">8.8</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#5a5a5a">;; measured in patchs</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> mountainX </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> mOffP </font><font color="#5a5a5a">;; locates the x-center of the mountain</font><font color="#000000">  </font><font color="#5a5a5a">;; Begin the drawing</font><font color="#000000">  </font><font color="#0000aa">cp</font><font color="#000000"> </font><font color="#5a5a5a">;; clear all the patches--sets them to black</font><font color="#000000">  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [    </font><font color="#0000aa">let</font><font color="#000000"> x (</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> b1) </font><font color="#660096">/</font><font color="#000000"> scale                     </font><font color="#5a5a5a">;; x-coordinate of patch relative to earth's center</font><font color="#000000">    </font><font color="#0000aa">let</font><font color="#000000"> y (</font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> b2) </font><font color="#660096">/</font><font color="#000000"> scale                     </font><font color="#5a5a5a">;; y-coordinate of patch relative to earth's center</font><font color="#000000">    </font><font color="#0000aa">let</font><font color="#000000"> alt </font><font color="#660096">sqrt</font><font color="#000000"> (x </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> y </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) </font><font color="#660096">-</font><font color="#000000"> eRadK          </font><font color="#5a5a5a">;; altitude of patch above earth in km</font><font color="#000000">    </font><font color="#0000aa">ifelse</font><font color="#000000"> alt </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">.6</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> eRadK </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">] </font><font color="#5a5a5a">;; a polar cap </font><font color="#000000">      [</font><font color="#0000aa">ifelse</font><font color="#000000"> alt </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">        [ </font><font color="#0000aa">ifelse</font><font color="#000000"> y </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> ][ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> ]]    </font><font color="#5a5a5a">;; if altitude is negative, make green or blue depending on the side of the earth</font><font color="#000000">         [</font><font color="#0000aa">ifelse</font><font color="#000000"> alt </font><font color="#660096">&lt;</font><font color="#000000"> tropoTop [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">108</font><font color="#000000"> ]  </font><font color="#5a5a5a">;; otherwise if the altitude is less than the troposphere, make blue sky</font><font color="#000000">          [</font><font color="#0000aa">if</font><font color="#000000"> alt </font><font color="#660096">&lt;</font><font color="#000000"> StratoTop                      </font><font color="#5a5a5a">;; if it is below the stratosphere...</font><font color="#000000">            [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (StratoTop </font><font color="#660096">-</font><font color="#000000"> alt) </font><font color="#660096">/</font><font color="#000000"> (StratoTop </font><font color="#660096">-</font><font color="#000000"> TropoTop )]]]]]  </font><font color="#5a5a5a">;; fade to black</font><font color="#000000">  </font><font color="#0000aa">ask</font><font color="#000000"> mountains [                                  </font><font color="#5a5a5a">;; create one mountain</font><font color="#000000">    </font><font color="#0000aa">setxy</font><font color="#000000"> mountainX earthTopP </font><font color="#660096">+</font><font color="#000000"> ( mountainSizeP </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#5a5a5a">;; center the mountain just below half its diameter above the earth</font><font color="#000000">    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> mountainSizeP ]  drawSquare </font><font color="#963700">yellow</font><font color="#000000"> ixp iyp isizeP                 </font><font color="#5a5a5a">;; draw insert square in the border color</font><font color="#000000">  drawSquare </font><font color="#963700">black</font><font color="#000000"> ixp iyp isizeP </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">              </font><font color="#5a5a5a">;; draw insert background (slightly smaller, leaving a border)</font><font color="#000000">  </font><font color="#0000aa">ask</font><font color="#000000"> earths [                                     </font><font color="#5a5a5a">;; create one earth</font><font color="#000000">    </font><font color="#0000aa">setxy</font><font color="#000000"> ixp iyp    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> iscale </font><font color="#660096">*</font><font color="#000000"> eRadK ]                  </font><font color="#5a5a5a">;; the size (diameter) is the twice the scaled radius of the earth in km</font><font color="#000000">  placeArrows                                      </font><font color="#5a5a5a">;; put the arrows in their new position</font><font color="#000000">  placeISSs  placeJunk  placePuffs  PlaceMoon</font><font color="#007f69">end</font><font color="#000000"></font><font color="#007f69">to</font><font color="#000000"> drawSquare [ squareColor squareCenterX squareCenterY squareSize ]  </font><font color="#0000aa">let</font><font color="#000000"> rad squareSize </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#0000aa">let</font><font color="#000000"> minX squareCenterX </font><font color="#660096">-</font><font color="#000000"> rad  </font><font color="#0000aa">let</font><font color="#000000"> maxX squareCenterX </font><font color="#660096">+</font><font color="#000000"> rad  </font><font color="#0000aa">let</font><font color="#000000"> minY squareCenterY </font><font color="#660096">-</font><font color="#000000"> rad  </font><font color="#0000aa">let</font><font color="#000000"> maxY squareCenterY </font><font color="#660096">+</font><font color="#000000"> rad  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">    [ </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> minX </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> maxX </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> minY </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> maxY         [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> squareColor ] ]  </font><font color="#5a5a5a">;; make a square. </font><font color="#000000"></font><font color="#007f69">end</font><font color="#000000"></font></pre></body></html>